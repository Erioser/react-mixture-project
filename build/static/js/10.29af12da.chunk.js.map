{"version":3,"sources":["pages/BeautyImages/particles/BeautyImageItem.js","pages/BeautyImages/particles/BeautyImageContent.js","pages/BeautyImages/index.js"],"names":["Meta","Card","BeautyImageItem","memo","props","_props$info","info","time","img","timeText","moment","format","react_default","a","createElement","card","className","cover","lib_default","alt","src","actions","icon","type","key","title","BeautyImageContent","dataSource","this","length","map","item","BasicComponent","particles_BeautyImageItem","id","renderItems","BeautyImagesPage","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","state","images","page","pageSize","hasMore","loading","handlePageAction","bind","assertThisInitialized","setState","apiGetBeautyImages","count","data","code","result","msgHandler","success","warning","error","getBeautyImages","_shouldComponentUpdate","_this2","_this$state","typography","Title","level","spin","spinning","particles_BeautyImageContent","es_button","Group","size","disabled","onClick"],"mappings":"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","file":"static/js/10.29af12da.chunk.js","sourcesContent":["import React, { memo } from 'react'\nimport { Card, Icon } from 'antd'\nimport Zmage from 'react-zmage'\nimport moment from 'moment'\nconst { Meta } = Card\n\nconst BeautyImageItem = memo((props) => {\n  let { time, img } = props.info\n  let timeText = moment(time).format('YYYY-MM-DD HH:mm:ss')\n  return (\n    <Card\n      className=\"beauty-images__item\"\n      cover={\n        <Zmage\n          alt=\"example\"\n          src={img}\n        />\n      }\n      actions={[\n        <Icon type=\"setting\" key=\"setting\" />\n      ]}\n    >\n      <Meta title={timeText}/>\n    </Card>\n  )\n})\n\nexport default BeautyImageItem","import React, { BasicComponent } from '@/service/BasicComponent'\n\nimport BeautyImageItem from './BeautyImageItem'\n\nclass BeautyImageContent extends BasicComponent {\n  renderItems () {\n    let { dataSource } = this.props\n    if (!dataSource.length) return false\n    // return dataSource.map((item) => (\n    //   <Col className=\"beauty-image__item-col\" key={item.id} span={6}>\n    //     <BeautyImageItem info={item}/>\n    //   </Col> \n    // ))\n    return dataSource.map((item) => (\n      <BeautyImageItem key={item.id} info={item}/>\n    ))\n  }\n  render () {\n    return (\n      <div className=\"beauty-images__content\">\n        { this.renderItems() } \n      </div>\n    )\n  }\n}\nexport default BeautyImageContent","import React, { BasicComponent } from '@/service/BasicComponent'\nimport { Typography, Button, Icon, Spin } from 'antd'\nimport './index.scss'\nimport BeautyImageContent from './particles/BeautyImageContent'\nimport { apiGetBeautyImages } from '@/api'\n\nclass BeautyImagesPage extends BasicComponent {\n  constructor (props) {\n    super(props)\n    this.state = {\n      images: [],\n      page: 1,\n      pageSize: 10,\n      hasMore: true,\n      loading: false\n    }\n    this.handlePageAction = this.handlePageAction.bind(this)\n  }\n  handlePageAction (type) {\n    this.setState((state) => {\n      let page = state.page + (type === 'prev' ? -1 : 1)\n      if (page === 0) page = 1\n      return { page }\n    })\n  }\n  async getBeautyImages (state) {\n    let { page, pageSize } = state || this.state\n    this.setState({ loading: true })\n    \n    try {\n      let data = await apiGetBeautyImages({\n        page, count: pageSize\n      })\n      if (data.code !== 200) return false\n      this.setState((state, props) => {\n        return {\n          hasMore: !!data.result.length,\n          images: data.result.length ? data.result : state.images,\n          loading: false\n        }\n      })\n      if (!data.result.length) {\n        this.msgHandler.warning('抱歉已经没有更多的美图了');\n      } else {\n        this.msgHandler.success('成功获取到最新的美图');\n      }\n    } catch (e) {\n      this.msgHandler.error('不好意思出错了')\n      this.setState({ loading: false })\n    }\n    \n  }\n  componentDidMount () {\n    this.getBeautyImages()\n  }\n  shouldComponentUpdate (props, state) {\n    if (state.page !== this.state.page) {\n      this.getBeautyImages(state)\n    }\n    return this._shouldComponentUpdate()\n  }\n  render () {\n    let  { page, images, hasMore, loading } = this.state\n    return (\n      <div className=\"page-container beauty-images-page\">\n        <Typography.Title level={3}>\n          美图推荐\n        </Typography.Title>\n        <Spin spinning={loading}>\n        <BeautyImageContent dataSource={images}/>\n        </Spin>\n        <Button.Group className=\"beauty-images__pagination\" size={100}>\n          <Button disabled={!!(page === 1)} onClick={() => { this.handlePageAction('prev') }} type=\"primary\">\n            <Icon type=\"left\" />\n            上一页\n          </Button>\n          <Button>{page}</Button>\n          <Button disabled={!hasMore} onClick={() => { this.handlePageAction('next') }} type=\"primary\">\n            下一页\n            <Icon type=\"right\" />\n          </Button>\n        </Button.Group>\n      </div>\n    )\n  }\n}\n\nexport default BeautyImagesPage"],"sourceRoot":""}